<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trading Rules Calculator</title>
  <!-- Tailwind CSS for styling -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <!-- Google Fonts for 'Inter' -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    /* Custom styles for the background texture and theme */
    body {
      font-family: 'Inter', sans-serif;
    }

    /* Style for tab buttons */
    .tab-button {
      transition: all 0.3s ease-in-out;
    }

    /* Dark theme styles */
    [data-theme='dark'] .tab-button.active {
      background-color: #3b82f6; /* Tailwind's blue-500 */
      color: white;
      box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    }
    
    /* Light theme styles */
    [data-theme='light'] .tab-button.active {
      background-color: #1d4ed8; /* Tailwind's blue-700 */
      color: white;
      box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    }

    /* Background texture styles */
    .bg-texture-dark {
      background-image: radial-gradient(circle, rgba(255, 255, 255, 0.05) 1px, transparent 1px);
      background-size: 20px 20px;
    }

    .bg-texture-light {
      background-image: radial-gradient(circle, rgba(0, 0, 0, 0.05) 1px, transparent 1px);
      background-size: 20px 20px;
    }
  </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-500 min-h-screen relative" data-theme="dark">

  <!-- Background overlay with dynamic texture -->
  <div id="background-texture" class="absolute inset-0 z-0 opacity-10"></div>

  <!-- Main content container -->
  <div class="relative z-10 flex flex-col items-center justify-start p-4 md:p-8 min-h-screen">
    
    <!-- Header with theme toggle -->
    <header class="w-full max-w-2xl flex justify-between items-center mb-6">
      <h1 class="text-3xl font-bold">Trading Calculator</h1>
      <button id="theme-toggle" class="p-2 rounded-full bg-gray-200 dark:bg-gray-800 hover:bg-gray-300 dark:hover:bg-gray-700 transition-colors duration-300">
        <i class="fas fa-sun text-gray-600 dark:hidden"></i>
        <i class="fas fa-moon hidden dark:inline-block text-gray-400"></i>
      </button>
    </header>

    <!-- Tabs and Content -->
    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-2xl p-6 transition-all duration-300">
      
      <!-- Tab Buttons -->
      <div class="flex space-x-2 mb-6 p-1 bg-gray-200 dark:bg-gray-700 rounded-full">
        <button id="tab-calculator" class="tab-button active flex-1 py-2 px-4 rounded-full font-medium text-sm text-center transition-colors">
          <i class="fas fa-calculator mr-2"></i>Calculator
        </button>
        <button id="tab-rules" class="tab-button flex-1 py-2 px-4 rounded-full font-medium text-sm text-center transition-colors">
          <i class="fas fa-book mr-2"></i>Rules
        </button>
      </div>

      <!-- Calculator Content -->
      <div id="content-calculator" class="tab-content block">
        <h2 class="text-2xl font-bold mb-4">Risk-Reward Calculator</h2>
        <div class="space-y-4">
          <div class="flex flex-col">
            <label for="entry-price" class="text-sm font-medium mb-1">Entry Price ($)</label>
            <input type="number" id="entry-price" placeholder="e.g., 150.50" class="input-field">
          </div>
          <div class="flex flex-col">
            <label for="stop-loss" class="text-sm font-medium mb-1">Stop Loss ($)</label>
            <input type="number" id="stop-loss" placeholder="e.g., 149.00" class="input-field">
          </div>
          <div class="flex flex-col">
            <label for="take-profit" class="text-sm font-medium mb-1">Take Profit ($)</label>
            <input type="number" id="take-profit" placeholder="e.g., 153.25" class="input-field">
          </div>
          <button id="calculate-btn" class="btn-primary w-full">Calculate R:R Ratio</button>
        </div>
        <div id="result" class="mt-6 p-4 rounded-xl bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 text-center font-bold text-lg hidden"></div>
      </div>

      <!-- Rules Content -->
      <div id="content-rules" class="tab-content hidden">
        <h2 class="text-2xl font-bold mb-4">My Trading Rules</h2>
        <textarea id="trading-rules-text" class="input-field w-full h-40 resize-none" placeholder="Write your personal trading rules here..."></textarea>
        <button id="save-rules-btn" class="btn-primary w-full mt-4">Save Rules</button>
        <div id="rules-status" class="mt-4 text-center text-sm text-green-600 dark:text-green-400 hidden">Rules saved successfully!</div>
      </div>
    </div>
    
    <!-- Daily Trading Quote -->
    <div id="daily-quote-container" class="mt-8 w-full max-w-2xl text-center p-4 rounded-xl bg-white dark:bg-gray-800 shadow-xl transition-all duration-300">
      <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2">Daily Trading Quote</h3>
      <p id="daily-quote-text" class="italic text-gray-600 dark:text-gray-400"></p>
    </div>

  </div>

  <script>
    // Constants for DOM elements
    const themeToggleBtn = document.getElementById('theme-toggle');
    const backgroundTexture = document.getElementById('background-texture');
    const body = document.body;

    const calculatorTabBtn = document.getElementById('tab-calculator');
    const rulesTabBtn = document.getElementById('tab-rules');
    const calculatorContent = document.getElementById('content-calculator');
    const rulesContent = document.getElementById('content-rules');

    const entryPriceInput = document.getElementById('entry-price');
    const stopLossInput = document.getElementById('stop-loss');
    const takeProfitInput = document.getElementById('take-profit');
    const calculateBtn = document.getElementById('calculate-btn');
    const resultDiv = document.getElementById('result');

    const tradingRulesTextarea = document.getElementById('trading-rules-text');
    const saveRulesBtn = document.getElementById('save-rules-btn');
    const rulesStatusDiv = document.getElementById('rules-status');
    
    const dailyQuoteText = document.getElementById('daily-quote-text');

    // Array of funny and quirky trading quotes
    const tradingQuotes = [
      "The market is a device for transferring money from the impatient to the patient. - Warren Buffett",
      "In trading, a day that doesn't end in a screenshot is a day that didn't happen.",
      "My biggest trading regret? Not buying a time machine when the market was down.",
      "The four most dangerous words in investing are: 'This time is different.' - Sir John Templeton",
      "I'm not saying my trades are bad, but my portfolio looks like it's been in a bar fight.",
      "The trend is your friend... until it ends.",
      "Rule #1: Never lose money. Rule #2: Never forget Rule #1. - Warren Buffett",
      "It's not about being right or wrong, it's about how much you make when you're right and how much you lose when you're wrong.",
      "Buying the dip is a great strategy, until you run out of dips to buy.",
      "My trading strategy is simple: Buy high, sell low, and then wonder what went wrong."
    ];

    /**
     * Updates the daily quote based on the current day of the year.
     * This provides a new quote each day without needing an external API.
     */
    function updateDailyQuote() {
      const today = new Date();
      const startOfYear = new Date(today.getFullYear(), 0, 0);
      const diff = today - startOfYear;
      const oneDay = 1000 * 60 * 60 * 24;
      const dayOfYear = Math.floor(diff / oneDay);
      
      const quoteIndex = dayOfYear % tradingQuotes.length;
      dailyQuoteText.innerText = `"${tradingQuotes[quoteIndex]}"`;
    }

    /**
     * Toggles between dark and light themes.
     */
    function toggleTheme() {
      const currentTheme = body.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      body.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      updateBackgroundTexture(newTheme);
    }

    /**
     * Updates the background texture based on the current theme.
     * @param {string} theme - The current theme ('dark' or 'light').
     */
    function updateBackgroundTexture(theme) {
      if (theme === 'dark') {
        backgroundTexture.classList.add('bg-texture-dark');
        backgroundTexture.classList.remove('bg-texture-light');
      } else {
        backgroundTexture.classList.add('bg-texture-light');
        backgroundTexture.classList.remove('bg-texture-dark');
      }
    }

    /**
     * Handles tab switching functionality.
     * @param {Event} event - The click event object.
     */
    function switchTab(event) {
      const targetTab = event.currentTarget.id;
      const isCalculatorTab = targetTab === 'tab-calculator';

      calculatorTabBtn.classList.toggle('active', isCalculatorTab);
      rulesTabBtn.classList.toggle('active', !isCalculatorTab);
      
      calculatorContent.classList.toggle('hidden', !isCalculatorTab);
      calculatorContent.classList.toggle('block', isCalculatorTab);
      
      rulesContent.classList.toggle('hidden', isCalculatorTab);
      rulesContent.classList.toggle('block', !isCalculatorTab);
    }

    /**
     * Calculates and displays the risk-reward ratio.
     */
    function calculateRatio() {
      const entry = parseFloat(entryPriceInput.value);
      const stopLoss = parseFloat(stopLossInput.value);
      const takeProfit = parseFloat(takeProfitInput.value);

      if (isNaN(entry) || isNaN(stopLoss) || isNaN(takeProfit) || entry <= 0 || stopLoss <= 0 || takeProfit <= 0) {
        resultDiv.textContent = "Please enter valid numbers.";
        resultDiv.classList.remove('hidden');
        return;
      }

      const risk = Math.abs(entry - stopLoss);
      const reward = Math.abs(takeProfit - entry);

      if (risk === 0) {
        resultDiv.textContent = "Risk cannot be zero.";
        resultDiv.classList.remove('hidden');
        return;
      }

      const ratio = (reward / risk).toFixed(2);
      resultDiv.textContent = `Risk-Reward Ratio: 1:${ratio}`;
      resultDiv.classList.remove('hidden');
    }

    /**
     * Saves trading rules to local storage.
     */
    function saveRules() {
      const rules = tradingRulesTextarea.value;
      localStorage.setItem('tradingRules', rules);
      rulesStatusDiv.classList.remove('hidden');
      setTimeout(() => rulesStatusDiv.classList.add('hidden'), 3000);
    }

    /**
     * Loads trading rules from local storage.
     */
    function loadRules() {
      const rules = localStorage.getItem('tradingRules');
      if (rules) {
        tradingRulesTextarea.value = rules;
      }
    }

    // Event Listeners
    document.addEventListener('DOMContentLoaded', () => {
      // Set initial theme and background
      const storedTheme = localStorage.getItem('theme') || 'dark';
      body.setAttribute('data-theme', storedTheme);
      updateBackgroundTexture(storedTheme);
      
      // Update the daily quote
      updateDailyQuote();

      // Load saved trading rules
      loadRules();
    });

    themeToggleBtn.addEventListener('click', toggleTheme);
    calculatorTabBtn.addEventListener('click', switchTab);
    rulesTabBtn.addEventListener('click', switchTab);
    calculateBtn.addEventListener('click', calculateRatio);
    saveRulesBtn.addEventListener('click', saveRules);
    
  </script>
</body>
</html>
